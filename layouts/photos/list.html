{{ define "main" }}

<div class="photos-page">

  <header class="page-header">
    <h1>{{ .Title }}</h1>
  </header>

  {{/* ===== 1️⃣ 先收集所有 group + project 页面 ===== */}}
  {{ $all := slice }}

  {{ range .Site.RegularPages }}
    {{ if or (strings.HasPrefix .File.Path "photos/group/")
             (strings.HasPrefix .File.Path "photos/projects/") }}
        {{ $all = $all | append . }}
    {{ end }}
  {{ end }}

  {{/* ===== 2️⃣ 按时间倒序排序 ===== */}}
  {{ $all = $all.ByDate.Reverse }}

  {{/* ===== 3️⃣ 统一时间线渲染 ===== */}}
  <section class="timeline-section">

    {{ range $all }}

      {{ if strings.HasPrefix .File.Path "photos/group/" }}
        {{ partial "photo-group.html" . }}

      {{ else if strings.HasPrefix .File.Path "photos/projects/" }}
        {{ partial "project-block.html" . }}

      {{ end }}

    {{ end }}

  </section>

</div>

{{ end }}
