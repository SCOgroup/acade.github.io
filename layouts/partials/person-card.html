{{ $person := . }}
{{ $avatar := partial "get-avatar" . }}

<div class="col mb-4">
  <div class="card h-100 shadow-sm border-0" style="overflow: hidden;">
    {{/* 头像容器 - 固定高度，防止卡片高度不一致 */}}
    <div class="d-flex justify-content-center mt-4">
      <div style="width: 140px; height: 140px;">
        {{ if $avatar }}
          <img src="{{ $avatar }}" alt="{{ $person.Title }}" 
               class="rounded-circle w-100 h-100 object-fit-cover"
               onerror="this.onerror=null; this.src='data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"140\" height=\"140\" viewBox=\"0 0 140 140\"><rect fill=\"%23f5f5f5\" width=\"140\" height=\"140\" rx=\"70\"/><text fill=\"%23999\" font-family=\"Arial\" font-size=\"14\" x=\"70\" y=\"75\" text-anchor=\"middle\">No Avatar</text></svg>'">
        {{ else }}
          <div class="d-flex align-items-center justify-content-center rounded-circle bg-light text-muted w-100 h-100">
            No Avatar
          </div>
        {{ end }}
      </div>
    </div>
    
    <div class="card-body text-center pb-0">
      {{/* 姓名 */}}
      <h3 class="h5 card-title mb-2">{{ $person.Title }}</h3>
      
      {{/* 角色和毕业年份 */}}
      <div class="text-muted mb-3">
        {{ $person.Params.role }}
        {{ with $person.Params.group }}
          <span class="ms-1">(Group: {{ . }})</span>
        {{ end }}
      </div>
      
      {{/* 研究兴趣 */}}
      {{ with $person.Params.interests }}
        <div class="card-text">
          <div class="fw-bold mb-2">Research Interests:</div>
          <div class="d-flex flex-wrap justify-content-center gap-1">
            {{ range . }}
              <span class="badge bg-light text-dark border">{{ . }}</span>
            {{ end }}
          </div>
        </div>
      {{ end }}
    </div>
    
    {{/* 毕业学校 */}}
    {{ with index $person.Params.organizations 0 }}
      <div class="card-footer bg-transparent border-0 text-center pt-0 pb-4">
        <span class="text-muted">{{ .name }}</span>
      </div>
    {{ end }}
  </div>
</div>
